(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{354:function(s,t,a){"use strict";a.r(t);var n=a(8),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"é™æ€ä»£ç†ä¸åŠ¨æ€ä»£ç†"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#é™æ€ä»£ç†ä¸åŠ¨æ€ä»£ç†"}},[s._v("#")]),s._v(" é™æ€ä»£ç†ä¸åŠ¨æ€ä»£ç†")]),s._v(" "),t("p",[s._v("æœ¬æ–‡ä¸»è¦ä»‹ç»äº†ä»£ç†æ¨¡å¼ã€é™æ€ä»£ç†ã€åŠ¨æ€ä»£ç†ç›¸å…³æ¦‚å¿µï¼Œä»¥åŠä½¿ç”¨ Java å®ç°åŠ¨æ€ä»£ç†çš„ä¸¤ç§æ–¹å¼ï¼šJDK åŠ¨æ€ä»£ç†å’Œ Cglib åŠ¨æ€ä»£ç†ã€‚")]),s._v(" "),t("h2",{attrs:{id:"ä»£ç†æ¨¡å¼"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä»£ç†æ¨¡å¼"}},[s._v("#")]),s._v(" ä»£ç†æ¨¡å¼")]),s._v(" "),t("p",[s._v("ç®€å•æ¥è¯´å°±æ˜¯ "),t("strong",[s._v("æˆ‘ä»¬ä½¿ç”¨ä»£ç†å¯¹è±¡æ¥ä»£æ›¿å¯¹çœŸå®å¯¹è±¡çš„è®¿é—®ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨ä¸ä¿®æ”¹åŸç›®æ ‡å¯¹è±¡çš„å‰æä¸‹ï¼Œæä¾›é¢å¤–çš„åŠŸèƒ½æ“ä½œï¼Œæ‰©å±•ç›®æ ‡å¯¹è±¡çš„åŠŸèƒ½ã€‚")])]),s._v(" "),t("p",[t("strong",[s._v("ä»£ç†æ¨¡å¼çš„ä¸»è¦ä½œç”¨æ˜¯æ‰©å±•ç›®æ ‡å¯¹è±¡çš„åŠŸèƒ½ï¼Œæ¯”å¦‚è¯´åœ¨ç›®æ ‡å¯¹è±¡çš„æŸä¸ªæ–¹æ³•æ‰§è¡Œå‰åä½ å¯ä»¥å¢åŠ ä¸€äº›è‡ªå®šä¹‰çš„æ“ä½œã€‚")])]),s._v(" "),t("p",[s._v("ğŸ”¶ "),t("strong",[s._v("ä¸‰ç§è§’è‰²")])]),s._v(" "),t("ul",[t("li",[s._v("Real Subjectï¼šçœŸå®ç±»ï¼Œä¹Ÿå°±æ˜¯è¢«ä»£ç†ç±»ã€å§”æ‰˜ç±»ã€‚ç”¨æ¥çœŸæ­£å®Œæˆä¸šåŠ¡æœåŠ¡åŠŸèƒ½ï¼›")]),s._v(" "),t("li",[s._v("Proxyï¼šä»£ç†ç±»ã€‚å°†è‡ªèº«çš„è¯·æ±‚ç”¨ Real Subject å¯¹åº”çš„åŠŸèƒ½æ¥å®ç°ï¼Œä»£ç†ç±»å¯¹è±¡å¹¶ä¸çœŸæ­£çš„å»å®ç°å…¶ä¸šåŠ¡åŠŸèƒ½ï¼›")]),s._v(" "),t("li",[s._v("Subjectï¼šå®šä¹‰ RealSubject å’Œ Proxy è§’è‰²éƒ½åº”è¯¥å®ç°çš„æ¥å£ã€‚")])]),s._v(" "),t("img",{staticStyle:{zoom:"45%"},attrs:{src:"https://raw.githubusercontent.com/zouquchen/Images/main/imgs2022/proxy-partten1.png",alt:"image-20220718154514730"}}),s._v(" "),t("p",[s._v("ğŸŒ°  "),t("strong",[s._v("ä¸¾ä¸ªæ —å­")])]),s._v(" "),t("img",{staticStyle:{zoom:"67%"},attrs:{src:"https://raw.githubusercontent.com/zouquchen/Images/main/imgs2022/proxy-partten-example.png",alt:"image-20220718152951538"}}),s._v(" "),t("ul",[t("li",[s._v("æˆ¿ä¸œï¼ˆè¢«ä»£ç†ç±»ï¼‰ï¼šæƒ³è¦å‡ºç§Ÿæˆ¿å±‹ï¼Œå®ƒçš„æ ¸å¿ƒä¸šåŠ¡å°±æ˜¯ç­¾åˆåŒå’Œæ”¶é’±ï¼Œä¸æƒ³ä¹Ÿæ— éœ€åšå…¶ä»–äº‹æƒ…ã€‚")]),s._v(" "),t("li",[s._v("ä¸­ä»‹ï¼ˆä»£ç†ç±»ï¼‰ï¼šä¸ºæˆ¿ä¸œå¢åŠ é¢å¤–çš„åŠŸèƒ½ï¼ˆæœåŠ¡ï¼‰ï¼Œå¯ä»¥ä»£æ›¿æˆ¿ä¸œåˆŠç™»å¹¿å‘Šã€å¸¦æˆ¿å®¢çœ‹æˆ¿ç­‰ã€‚")]),s._v(" "),t("li",[s._v("æˆ¿å®¢ï¼ˆè°ƒç”¨è€…ï¼‰ï¼šç›´æ¥è°ƒç”¨ä»£ç†ç±»çš„å¯¹è±¡çš„å‡ºç§Ÿæˆ¿å±‹çš„æ–¹æ³•ï¼Œå°±å¯ä»¥çœ‹åˆ°å¹¿å‘Šï¼Œçœ‹æˆ¿ï¼Œæœ€åç­¾åˆåŒäº¤é’±ã€‚")])]),s._v(" "),t("p",[s._v("â­  "),t("strong",[s._v("æ€»ç»“")])]),s._v(" "),t("p",[s._v("é€šè¿‡ä»£ç†ç±»ï¼Œä¸ºåŸå§‹ç±»ï¼ˆç›®æ ‡ç±»ï¼‰å¢åŠ é¢å¤–çš„åŠŸèƒ½ï¼Œåˆ©äºåŸå§‹ç±»çš„ç»´æŠ¤ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰ä¿®æ”¹æˆ¿ä¸œç±»ï¼Œè€Œæ˜¯æ·»åŠ äº†ä¸­ä»‹ç±»ä¸ºå…¶å¢åŠ äº†é¢å¤–åŠŸèƒ½ã€‚")]),s._v(" "),t("p",[t("strong",[s._v("ä¸ºäº†ä¿æŒè¡Œä¸ºçš„ä¸€è‡´æ€§ï¼Œå§”æ‰˜ç±»å’Œä»£ç†ç±»éƒ½éœ€è¦å®ç°ç›¸åŒçš„æ¥å£")]),s._v("ï¼Œè¿™æ ·åœ¨è®¿é—®è€…çœ‹æ¥ä¸¤è€…ä¹‹é—´å°±æ²¡æœ‰åŒºåˆ«ã€‚é€šè¿‡ä»£ç†ç±»è¿™ä¸ªä¸­é—´å±‚ï¼Œå¾ˆå¥½åœ°éšè—å’Œä¿æŠ¤äº†å§”æ‰˜ç±»å¯¹è±¡ï¼Œèƒ½"),t("strong",[s._v("æœ‰æ•ˆå±è”½å¤–ç•Œå¯¹å§”æ‰˜ç±»å¯¹è±¡çš„ç›´æ¥è®¿é—®")]),s._v("ã€‚")]),s._v(" "),t("p",[s._v("ä»£ç†æ¨¡å¼æœ‰"),t("strong",[s._v("é™æ€ä»£ç†")]),s._v("å’Œ"),t("strong",[s._v("åŠ¨æ€ä»£ç†")]),s._v("ä¸¤ç§å®ç°æ–¹å¼ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹é™æ€ä»£ç†æ¨¡å¼çš„å®ç°ã€‚")]),s._v(" "),t("h2",{attrs:{id:"é™æ€ä»£ç†"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#é™æ€ä»£ç†"}},[s._v("#")]),s._v(" é™æ€ä»£ç†")]),s._v(" "),t("p",[s._v("é™æ€ä»£ç†å®ç°æ­¥éª¤:")]),s._v(" "),t("ol",[t("li",[s._v("å®šä¹‰ä¸€ä¸ªæ¥å£åŠå…¶å®ç°ç±»ï¼›")]),s._v(" "),t("li",[s._v("åˆ›å»ºä¸€ä¸ªä»£ç†ç±»åŒæ ·å®ç°è¿™ä¸ªæ¥å£")]),s._v(" "),t("li",[s._v("å°†ç›®æ ‡å¯¹è±¡æ³¨å…¥è¿›ä»£ç†ç±»ï¼Œç„¶ååœ¨ä»£ç†ç±»çš„å¯¹åº”æ–¹æ³•è°ƒç”¨ç›®æ ‡ç±»ä¸­çš„å¯¹åº”æ–¹æ³•ã€‚è¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ä»£ç†ç±»å±è”½å¯¹ç›®æ ‡å¯¹è±¡çš„è®¿é—®ï¼Œå¹¶ä¸”å¯ä»¥åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œå‰ååšä¸€äº›è‡ªå·±æƒ³åšçš„äº‹æƒ…ã€‚")])]),s._v(" "),t("p",[s._v("ä¸‹é¢é€šè¿‡ä»£ç å±•ç¤ºï¼š")]),s._v(" "),t("p",[t("strong",[s._v("1.å®šä¹‰å‘é€çŸ­ä¿¡çš„æ¥å£")])]),s._v(" "),t("div",{staticClass:"language-Java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SmsService")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("send")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[t("strong",[s._v("2.å®ç°å‘é€çŸ­ä¿¡çš„æ¥å£")])]),s._v(" "),t("div",{staticClass:"language-Java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SmsServiceImpl")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("implements")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SmsService")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("send")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"send message:"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[t("strong",[s._v("3.åˆ›å»ºä»£ç†ç±»å¹¶åŒæ ·å®ç°å‘é€çŸ­ä¿¡çš„æ¥å£")])]),s._v(" "),t("div",{staticClass:"language-Java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SmsProxy")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("implements")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SmsService")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SmsService")]),s._v(" smsService"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SmsProxy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SmsService")]),s._v(" smsService"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("smsService "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" smsService"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("send")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//è°ƒç”¨æ–¹æ³•ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ è‡ªå·±çš„æ“ä½œ")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"before method send()"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        smsService"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("send")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//è°ƒç”¨æ–¹æ³•ä¹‹åï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥æ·»åŠ è‡ªå·±çš„æ“ä½œ")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"after method send()"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br")])]),t("p",[t("strong",[s._v("4.å®é™…ä½¿ç”¨")])]),s._v(" "),t("div",{staticClass:"language-Java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Main")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" args"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SmsService")]),s._v(" smsService "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SmsServiceImpl")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SmsProxy")]),s._v(" smsProxy "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SmsProxy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("smsService"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        smsProxy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("send")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"java"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("è¿è¡Œä¸Šè¿°ä»£ç ä¹‹åï¼Œæ§åˆ¶å°æ‰“å°å‡ºï¼š")]),s._v(" "),t("div",{staticClass:"language-Output line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("before method send()\nsend message:java\nafter method send()\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("å¯ä»¥è¾“å‡ºç»“æœçœ‹å‡ºï¼Œæˆ‘ä»¬å·²ç»å¢åŠ äº† "),t("code",[s._v("SmsServiceImpl")]),s._v(" çš„"),t("code",[s._v("send()")]),s._v("æ–¹æ³•ã€‚")]),s._v(" "),t("p",[t("strong",[s._v("é™æ€ä»£ç†ä¸­ï¼Œæˆ‘ä»¬å¯¹ç›®æ ‡å¯¹è±¡çš„æ¯ä¸ªæ–¹æ³•çš„å¢å¼ºéƒ½æ˜¯æ‰‹åŠ¨å®Œæˆçš„ï¼Œéå¸¸ä¸çµæ´»ä¸”éº»çƒ¦ï¼Œæ¯”å¦‚æ¥å£ä¸€æ—¦æ–°å¢åŠ æ–¹æ³•ï¼Œç›®æ ‡å¯¹è±¡å’Œä»£ç†å¯¹è±¡éƒ½è¦è¿›è¡Œä¿®æ”¹ï¼ŒåŒæ—¶ï¼Œæˆ‘ä»¬éœ€è¦å¯¹æ¯ä¸ªç›®æ ‡ç±»éƒ½å•ç‹¬å†™ä¸€ä¸ªä»£ç†ç±»")]),s._v("ã€‚æ‰€ä»¥ï¼Œ é™æ€ä»£ç†å®é™…åº”ç”¨åœºæ™¯éå¸¸éå¸¸å°‘ï¼Œæ—¥å¸¸å¼€å‘å‡ ä¹çœ‹ä¸åˆ°ä½¿ç”¨é™æ€ä»£ç†çš„åœºæ™¯ã€‚")]),s._v(" "),t("p",[s._v("ä¸Šé¢æˆ‘ä»¬æ˜¯ä»å®ç°å’Œåº”ç”¨è§’åº¦æ¥è¯´çš„é™æ€ä»£ç†ï¼Œä» JVM å±‚é¢æ¥è¯´ï¼Œ "),t("strong",[s._v("é™æ€ä»£ç†åœ¨ç¼–è¯‘æ—¶å°±å°†æ¥å£ã€å®ç°ç±»ã€ä»£ç†ç±»è¿™äº›éƒ½å˜æˆäº†ä¸€ä¸ªä¸ªå®é™…çš„ class æ–‡ä»¶")]),s._v("ã€‚")]),s._v(" "),t("h2",{attrs:{id:"java-å­—èŠ‚ç ç”Ÿæˆæ¡†æ¶"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#java-å­—èŠ‚ç ç”Ÿæˆæ¡†æ¶"}},[s._v("#")]),s._v(" Java å­—èŠ‚ç ç”Ÿæˆæ¡†æ¶")]),s._v(" "),t("p",[s._v("åŠ¨æ€ä»£ç†æœºåˆ¶å’Œ Java å­—èŠ‚ç ç”Ÿæˆæ¡†æ¶æ¯æ¯ç›¸å…³ã€‚ä¸€ä¸ª "),t("code",[s._v("Class")]),s._v(" ç±»å¯¹åº”ä¸€ä¸ª "),t("code",[s._v(".class")]),s._v(" å­—èŠ‚ç æ–‡ä»¶ï¼Œä¹Ÿå°±è¯´å­—èŠ‚ç æ–‡ä»¶ä¸­å­˜å‚¨äº†ä¸€ä¸ªç±»çš„å…¨éƒ¨ä¿¡æ¯ã€‚å­—èŠ‚ç å…¶å®æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå†…å®¹æ˜¯åªæœ‰ JVM èƒ½å¤Ÿè¯†åˆ«çš„æœºå™¨ç ã€‚")]),s._v(" "),t("p",[s._v("è§£æè¿‡ç¨‹è¿™æ ·çš„ï¼šJVM è¯»å– "),t("code",[s._v(".class")]),s._v(" å­—èŠ‚ç æ–‡ä»¶ï¼Œå–å‡ºäºŒè¿›åˆ¶æ•°æ®ï¼ŒåŠ è½½åˆ°å†…å­˜ä¸­ï¼Œè§£æå­—èŠ‚ç æ–‡ä»¶å†…çš„ä¿¡æ¯ï¼Œç”Ÿæˆå¯¹åº”çš„ "),t("code",[s._v("Class")]),s._v(" ç±»å¯¹è±¡ï¼š")]),s._v(" "),t("img",{staticStyle:{zoom:"67%"},attrs:{src:"https://raw.githubusercontent.com/zouquchen/Images/main/imgs2022/java-class.png",alt:"image-20220719150309890"}}),s._v(" "),t("p",[s._v("æ˜¾ç„¶ï¼Œä¸Šè¿°è¿™ä¸ªè¿‡ç¨‹æ˜¯åœ¨ç¼–è¯‘æœŸå°±å‘ç”Ÿçš„ã€‚")]),s._v(" "),t("p",[s._v("é‚£ä¹ˆï¼Œç”±äºJVM æ˜¯é€šè¿‡ "),t("code",[s._v(".class")]),s._v(" å­—èŠ‚ç æ–‡ä»¶ï¼ˆä¹Ÿå°±æ˜¯äºŒè¿›åˆ¶ä¿¡æ¯ï¼‰åŠ è½½ç±»çš„ï¼Œå¦‚æœæˆ‘ä»¬åœ¨è¿è¡ŒæœŸéµå¾ª Java ç¼–è¯‘ç³»ç»Ÿç»„ç»‡ "),t("code",[s._v(".class")]),s._v(" å­—èŠ‚ç æ–‡ä»¶çš„æ ¼å¼å’Œç»“æ„ï¼Œç”Ÿæˆç›¸åº”çš„äºŒè¿›åˆ¶æ•°æ®ï¼Œç„¶åå†æŠŠè¿™ä¸ªäºŒè¿›åˆ¶æ•°æ®åŠ è½½è½¬æ¢æˆå¯¹åº”çš„ç±»ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬ä¸å°±å®Œæˆäº†åœ¨è¿è¡Œæ—¶åŠ¨æ€çš„åˆ›å»ºä¸€ä¸ªç±»ã€‚è¿™ä¸ªæ€æƒ³å…¶å®ä¹Ÿå°±æ˜¯åŠ¨æ€ä»£ç†çš„æ€æƒ³ã€‚")]),s._v(" "),t("img",{staticStyle:{zoom:"67%"},attrs:{src:"https://raw.githubusercontent.com/zouquchen/Images/main/imgs2022/java-class2.png",alt:"image-20220719150420778"}}),s._v(" "),t("h2",{attrs:{id:"åŠ¨æ€ä»£ç†"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#åŠ¨æ€ä»£ç†"}},[s._v("#")]),s._v(" åŠ¨æ€ä»£ç†")]),s._v(" "),t("p",[s._v("ä»£ç†ç±»æ— éæ˜¯åœ¨è°ƒç”¨å§”æ‰˜ç±»æ–¹æ³•çš„å‰åå¢åŠ äº†ä¸€äº›æ“ä½œã€‚å§”æ‰˜ç±»çš„ä¸åŒï¼Œä¹Ÿå°±å¯¼è‡´ä»£ç†ç±»çš„ä¸åŒã€‚")]),s._v(" "),t("p",[s._v("é‚£ä¹ˆä¸ºäº†åšä¸€ä¸ªé€šç”¨æ€§çš„ä»£ç†ç±»å‡ºæ¥ï¼Œæˆ‘ä»¬æŠŠè°ƒç”¨å§”æ‰˜ç±»æ–¹æ³•çš„è¿™ä¸ªåŠ¨ä½œæŠ½å–å‡ºæ¥ï¼ŒæŠŠå®ƒå°è£…æˆä¸€ä¸ªé€šç”¨æ€§çš„å¤„ç†ç±»ï¼Œäºæ˜¯å°±æœ‰äº†åŠ¨æ€ä»£ç†ä¸­çš„ "),t("code",[s._v("InvocationHandler")]),s._v(" è§’è‰²ï¼ˆå¤„ç†ç±»ï¼‰ã€‚")]),s._v(" "),t("p",[s._v("äºæ˜¯ï¼Œåœ¨ä»£ç†ç±»å’Œå§”æ‰˜ç±»ä¹‹é—´å°±å¤šäº†ä¸€ä¸ªå¤„ç†ç±»çš„è§’è‰²ï¼Œè¿™ä¸ªè§’è‰²ä¸»è¦æ˜¯"),t("strong",[s._v("å¯¹ä»£ç†ç±»è°ƒç”¨å§”æ‰˜ç±»æ–¹æ³•çš„è¿™ä¸ªåŠ¨ä½œè¿›è¡Œç»Ÿä¸€çš„è°ƒç”¨")]),s._v("ï¼Œä¹Ÿå°±æ˜¯ç”± "),t("code",[s._v("InvocationHandler")]),s._v(" æ¥ç»Ÿä¸€å¤„ç†ä»£ç†ç±»è°ƒç”¨å§”æ‰˜ç±»æ–¹æ³•è¿™ä¸ªæ“ä½œã€‚")]),s._v(" "),t("img",{staticStyle:{zoom:"67%"},attrs:{src:"https://raw.githubusercontent.com/zouquchen/Images/main/imgs2022/java-dynamic-proxy1.png",alt:"image-20220719152023013"}}),s._v(" "),t("p",[t("strong",[s._v("ä» JVM è§’åº¦æ¥è¯´ï¼ŒåŠ¨æ€ä»£ç†æ˜¯åœ¨è¿è¡Œæ—¶åŠ¨æ€ç”Ÿæˆ "),t("code",[s._v(".class")]),s._v(" å­—èŠ‚ç æ–‡ä»¶ ï¼Œå¹¶åŠ è½½åˆ° JVM ä¸­çš„")]),s._v("ã€‚")]),s._v(" "),t("p",[s._v("å°± Java æ¥è¯´ï¼ŒåŠ¨æ€ä»£ç†çš„å®ç°æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œæ¯”å¦‚ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("JDK åŠ¨æ€ä»£ç†")]),s._v(" "),t("li",[s._v("CGLIB åŠ¨æ€ä»£ç†")]),s._v(" "),t("li",[s._v("...")])]),s._v(" "),t("h2",{attrs:{id:"jdk-åŠ¨æ€ä»£ç†"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jdk-åŠ¨æ€ä»£ç†"}},[s._v("#")]),s._v(" JDK åŠ¨æ€ä»£ç†")]),s._v(" "),t("h3",{attrs:{id:"jdkproxy-ä½¿ç”¨æ­¥éª¤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jdkproxy-ä½¿ç”¨æ­¥éª¤"}},[s._v("#")]),s._v(" JDKProxy ä½¿ç”¨æ­¥éª¤")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("å®šä¹‰ä¸€ä¸ªæ¥å£ï¼ˆSubjectï¼‰")])]),s._v(" "),t("li",[t("p",[s._v("åˆ›å»ºä¸€ä¸ªå§”æ‰˜ç±»ï¼ˆReal Subjectï¼‰å®ç°è¿™ä¸ªæ¥å£")])]),s._v(" "),t("li",[t("p",[s._v("åˆ›å»ºä¸€ä¸ªå¤„ç†ç±»å¹¶å®ç° "),t("code",[s._v("InvocationHandler")]),s._v(" æ¥å£ï¼Œé‡å†™å…¶ "),t("code",[s._v("invoke")]),s._v(" æ–¹æ³•")])]),s._v(" "),t("li",[t("p",[s._v("åˆ›å»ºä»£ç†å¯¹è±¡ï¼ˆProxyï¼‰ï¼šé€šè¿‡ "),t("code",[s._v("Proxy.newProxyInstance()")]),s._v(" åˆ›å»ºå§”æ‰˜ç±»å¯¹è±¡çš„ä»£ç†å¯¹è±¡")])])]),s._v(" "),t("h3",{attrs:{id:"jdkproxy-ä»£ç ç¤ºä¾‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jdkproxy-ä»£ç ç¤ºä¾‹"}},[s._v("#")]),s._v(" JDKProxy ä»£ç ç¤ºä¾‹")]),s._v(" "),t("p",[s._v("â­ "),t("strong",[s._v("1 å®šä¹‰ä¸€ä¸ªæ¥å£ï¼ˆSubjectï¼‰")])]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SmsService")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("send")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("â­ "),t("strong",[s._v("2 åˆ›å»ºä¸€ä¸ªå§”æ‰˜ç±»ï¼ˆReal Subjectï¼‰å®ç°è¿™ä¸ªæ¥å£")])]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SmsServiceImpl")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("implements")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SmsService")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("send")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"send message:"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("â­ "),t("strong",[s._v("3 åˆ›å»ºä¸€ä¸ªå¤„ç†ç±»ï¼Œå¹¶å°†å§”æ‰˜ç±»æ³¨å…¥å¤„ç†ç±»")])]),s._v(" "),t("p",[s._v("è¿™ä¸ªå¤„ç†ç±»éœ€è¦å®ç° "),t("code",[s._v("InvocationHandler")]),s._v(" æ¥å£ï¼Œé‡å†™å…¶ "),t("code",[s._v("invoke")]),s._v(" æ–¹æ³•ï¼ˆåœ¨ "),t("code",[s._v("invoke")]),s._v(" æ–¹æ³•ä¸­åˆ©ç”¨åå°„æœºåˆ¶è°ƒç”¨å§”æ‰˜ç±»çš„æ–¹æ³•ï¼Œå¹¶è‡ªå®šä¹‰ä¸€äº›å¤„ç†é€»è¾‘ï¼‰")]),s._v(" "),t("p",[s._v("å…¶ä¸­åŒ…å«ä¸‰ä¸ªå‚æ•°ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("proxyï¼šä»£ç†ç±»å¯¹è±¡")]),s._v(" "),t("li",[s._v("methodï¼šé€šè¿‡å®ƒæ¥è°ƒç”¨å§”æ‰˜ç±»çš„æ–¹æ³•")]),s._v(" "),t("li",[s._v("argsï¼šä¼ ç»™å§”æ‰˜ç±»æ–¹æ³•çš„å‚æ•°åˆ—è¡¨")])]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token import"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("java"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("lang"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("reflect"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("InvocationHandler")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token import"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("java"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("lang"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("reflect"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Method")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MyInvocationHandler")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("implements")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("InvocationHandler")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å°†å§”æ‰˜ç±»æ³¨å…¥å¤„ç†ç±»ï¼ˆè¿™é‡Œæˆ‘ä»¬ç”¨ Object ä»£æ›¿ï¼Œæ–¹ä¾¿æ‰©å±•ï¼‰")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" target"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MyInvocationHandler")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" target"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("target "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" target"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("invoke")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" proxy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Method")]),s._v(" method"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" args"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Throwable")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è°ƒç”¨æ–¹æ³•ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ è‡ªå·±çš„æ“ä½œ")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"before method "')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" method"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" result "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" method"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("invoke")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("target"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" args"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è°ƒç”¨æ–¹æ³•ä¹‹åï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥æ·»åŠ è‡ªå·±çš„æ“ä½œ")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"after method "')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" method"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" result"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br")])]),t("p",[s._v("â­ "),t("strong",[s._v("4 åˆ›å»ºä»£ç†å¯¹è±¡å¹¶æµ‹è¯•")])]),s._v(" "),t("p",[s._v("é€šè¿‡ "),t("code",[s._v("Proxy.newProxyInstance()")]),s._v(" åˆ›å»ºå§”æ‰˜ç±»å¯¹è±¡çš„ä»£ç†å¯¹è±¡ï¼Œè¯¥æ–¹æ³•éœ€è¦3ä¸ªå‚æ•°ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("ç±»åŠ è½½å™¨ ClassLoaderï¼Œå› ä¸ºåŠ è½½å­—èŠ‚ç æ–‡ä»¶éœ€è¦ç±»çš„åŠ è½½å™¨")]),s._v(" "),t("li",[s._v("å§”æ‰˜ç±»å®ç°çš„æ¥å£æ•°ç»„ï¼Œè‡³å°‘éœ€è¦ä¼ å…¥ä¸€ä¸ªæ¥å£è¿›å»")]),s._v(" "),t("li",[s._v("è°ƒç”¨çš„ "),t("code",[s._v("InvocationHandler")]),s._v(" å®ä¾‹å¤„ç†æ¥å£æ–¹æ³•ï¼ˆä¹Ÿå°±æ˜¯ç¬¬ 3 æ­¥æˆ‘ä»¬åˆ›å»ºçš„ç±»çš„å®ä¾‹ï¼‰")])]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("JdkProxyTest")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" args"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1 åˆ›å»ºåŸå§‹å¯¹è±¡")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SmsService")]),s._v(" smsService "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SmsServiceImpl")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2 åˆ›å»ºå¢å¼ºæ–¹æ³•")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MyInvocationHandler")]),s._v(" handler "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MyInvocationHandler")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("smsService"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 3 åˆ›å»ºä»£ç†å¯¹è±¡ï¼Œè¿™é‡Œè¦å¼ºè½¬ä¸ºSmsService")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SmsService")]),s._v(" smsServiceProxy "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SmsService")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Proxy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("newProxyInstance")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n                smsService"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getClass")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getClassLoader")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä¼ å…¥ç±»çš„åŠ è½½å™¨ï¼Œè¿™é‡Œé€‰æ‹©smsServiceå¯¹è±¡çš„ç±»çš„åŠ è½½å™¨")]),s._v("\n                smsService"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getClass")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getInterfaces")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// smsServiceçš„æ¥å£")]),s._v("\n                handler"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å¢å¼ºæ–¹æ³•")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 4 æµ‹è¯•ä»£ç†ç±»æ–¹æ³•")]),s._v("\n        smsServiceProxy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("send")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Java"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br")])]),t("p",[s._v("æ§åˆ¶å°è¾“å‡ºï¼š")]),s._v(" "),t("div",{staticClass:"language-output line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("before method send\nsend message:Java\nafter method send\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h2",{attrs:{id:"cglib-åŠ¨æ€ä»£ç†"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cglib-åŠ¨æ€ä»£ç†"}},[s._v("#")]),s._v(" CGLib åŠ¨æ€ä»£ç†")]),s._v(" "),t("h3",{attrs:{id:"cglib-ç®€ä»‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cglib-ç®€ä»‹"}},[s._v("#")]),s._v(" CGLib ç®€ä»‹")]),s._v(" "),t("p",[s._v("CGLIBï¼ˆCode Generation Libraryï¼‰æ˜¯ä¸€ä¸ªåŸºäº ASM çš„ Java å­—èŠ‚ç ç”Ÿæˆæ¡†æ¶ï¼Œå®ƒå…è®¸æˆ‘ä»¬åœ¨è¿è¡Œæ—¶å¯¹å­—èŠ‚ç è¿›è¡Œä¿®æ”¹å’ŒåŠ¨æ€ç”Ÿæˆã€‚åŸç†å°±æ˜¯"),t("strong",[s._v("é€šè¿‡å­—èŠ‚ç æŠ€æœ¯ç”Ÿæˆä¸€ä¸ªå­ç±»ï¼Œå¹¶åœ¨å­ç±»ä¸­æ‹¦æˆªçˆ¶ç±»æ–¹æ³•çš„è°ƒç”¨ï¼Œç»‡å…¥é¢å¤–çš„ä¸šåŠ¡é€»è¾‘")]),s._v("ã€‚")]),s._v(" "),t("p",[s._v("CGLIB å¼•å…¥ä¸€ä¸ªæ–°çš„è§’è‰²å°±æ˜¯"),t("strong",[s._v("æ–¹æ³•æ‹¦æˆªå™¨")]),s._v(" "),t("code",[s._v("MethodInterceptor")]),s._v("ã€‚å’Œ JDK ä¸­çš„å¤„ç†ç±» "),t("code",[s._v("InvocationHandler")]),s._v(" å·®ä¸å¤šï¼Œä¹Ÿæ˜¯ç”¨æ¥å®ç°æ–¹æ³•çš„ç»Ÿä¸€è°ƒç”¨çš„ã€‚")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://raw.githubusercontent.com/zouquchen/Images/main/imgs2022/Java-JDKProxy%2526Cglib.png",alt:"image-20220817122647818"}})]),s._v(" "),t("p",[s._v("å¦å¤–ç”±äº CGLIB é‡‡ç”¨"),t("strong",[s._v("ç»§æ‰¿")]),s._v("çš„æ–¹å¼ï¼Œæ‰€ä»¥è¢«ä»£ç†çš„ç±»ä¸èƒ½è¢« "),t("code",[s._v("final")]),s._v(" ä¿®é¥°ã€‚")]),s._v(" "),t("p",[s._v("å¾ˆå¤šçŸ¥åçš„å¼€æºæ¡†æ¶éƒ½ä½¿ç”¨åˆ°äº† CGLIBï¼Œ ä¾‹å¦‚ "),t("strong",[s._v("Spring ä¸­çš„ AOP æ¨¡å—ä¸­ï¼šå¦‚æœç›®æ ‡å¯¹è±¡å®ç°äº†æ¥å£ï¼Œåˆ™é»˜è®¤é‡‡ç”¨ JDK åŠ¨æ€ä»£ç†ï¼Œå¦åˆ™é‡‡ç”¨ CGLIB åŠ¨æ€ä»£ç†")]),s._v("ã€‚")]),s._v(" "),t("h3",{attrs:{id:"cglib-ä½¿ç”¨æ­¥éª¤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cglib-ä½¿ç”¨æ­¥éª¤"}},[s._v("#")]),s._v(" CGLib ä½¿ç”¨æ­¥éª¤")]),s._v(" "),t("ol",[t("li",[s._v("åˆ›å»ºå§”æ‰˜ç±»ï¼ˆReal Subjectï¼‰")]),s._v(" "),t("li",[s._v("åˆ›å»ºæ–¹æ³•æ‹¦æˆªå™¨å®ç°æ¥å£ "),t("code",[s._v("MethodInterceptor")]),s._v("ï¼Œå¹¶é‡å†™ "),t("code",[s._v("intercept")]),s._v(" æ–¹æ³•ã€‚"),t("code",[s._v("intercept")]),s._v(" ç”¨äºæ‹¦æˆªå¹¶å¢å¼ºå§”æ‰˜ç±»çš„æ–¹æ³•")]),s._v(" "),t("li",[s._v("åˆ›å»ºä»£ç†å¯¹è±¡ï¼ˆProxyï¼‰ï¼šé€šè¿‡ "),t("code",[s._v("Enhancer.create()")]),s._v(" åˆ›å»ºå§”æ‰˜ç±»å¯¹è±¡çš„ä»£ç†å¯¹è±¡")])]),s._v(" "),t("h3",{attrs:{id:"cglib-ä»£ç ç¤ºä¾‹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cglib-ä»£ç ç¤ºä¾‹"}},[s._v("#")]),s._v(" CGLib ä»£ç ç¤ºä¾‹")]),s._v(" "),t("p",[s._v("â­ "),t("strong",[s._v("1 æ·»åŠ ä¾èµ–")])]),s._v(" "),t("p",[s._v("ä¸åŒäº JDK åŠ¨æ€ä»£ç†ä¸éœ€è¦é¢å¤–çš„ä¾èµ–ã€‚CGLIB æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œå¦‚æœä½ è¦ä½¿ç”¨å®ƒçš„è¯ï¼Œéœ€è¦æ‰‹åŠ¨æ·»åŠ ç›¸å…³ä¾èµ–ã€‚")]),s._v(" "),t("div",{staticClass:"language-xml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("cglib"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("cglib"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("version")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("3.3.0"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("version")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("â­ "),t("strong",[s._v("2 åˆ›å»ºä¸ªå§”æ‰˜ç±»ï¼ˆReal Subjectï¼‰")])]),s._v(" "),t("p",[s._v("æ³¨æ„ï¼šè¿™ä¸ªå§”æ‰˜ç±»å¯ä»¥ä¸å®ç°æ¥å£ï¼Œå¦‚æœä½¿ç”¨ JDKProxy çš„è¯ï¼Œå§”æ‰˜ç±»å¿…é¡»è¦å®ç°æ¥å£ã€‚")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SmsService")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("send")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"send message:"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("â­ "),t("strong",[s._v("3 åˆ›å»ºæ–¹æ³•æ‹¦æˆªå™¨å®ç°æ¥å£")])]),s._v(" "),t("p",[s._v("å®ç°æ¥å£ "),t("code",[s._v("MethodInterceptor")]),s._v("ï¼Œå¹¶é‡å†™ "),t("code",[s._v("intercept")]),s._v(" æ–¹æ³•ï¼Œ"),t("code",[s._v("intercept")]),s._v(" ç”¨äºæ‹¦æˆªå¹¶å¢å¼ºå§”æ‰˜ç±»çš„æ–¹æ³•ï¼Œå’Œ JDK åŠ¨æ€ä»£ç† "),t("code",[s._v("InvocationHandler")]),s._v(" ä¸­çš„ "),t("code",[s._v("invoke")]),s._v(" æ–¹æ³•ç±»ä¼¼ã€‚è¯¥æ–¹æ³•æ‹¥æœ‰å››ä¸ªå‚æ•°ï¼š")]),s._v(" "),t("ul",[t("li",[s._v("Object var1ï¼šå§”æ‰˜ç±»å¯¹è±¡")]),s._v(" "),t("li",[s._v("Method var2ï¼šè¢«æ‹¦æˆªçš„æ–¹æ³•ï¼ˆå§”æ‰˜ç±»ä¸­éœ€è¦å¢å¼ºçš„æ–¹æ³•ï¼‰")]),s._v(" "),t("li",[s._v("Object[] var3ï¼šæ–¹æ³•å…¥å‚")]),s._v(" "),t("li",[s._v("MethodProxy var4ï¼šç”¨äºè°ƒç”¨å§”æ‰˜ç±»çš„åŸå§‹æ–¹æ³•ï¼ˆåº•å±‚ä¹Ÿæ˜¯é€šè¿‡åå°„æœºåˆ¶ï¼Œä¸è¿‡ä¸æ˜¯ "),t("code",[s._v("Method.invoke")]),s._v(" äº†ï¼Œè€Œæ˜¯ä½¿ç”¨ "),t("code",[s._v("MethodProxy.invokeSuper")]),s._v(" æ–¹æ³•ï¼‰")])]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token import"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("net"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sf"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cglib"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("proxy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MethodInterceptor")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token import"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("net"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sf"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cglib"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("proxy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MethodProxy")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token import"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("java"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("lang"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("reflect"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Method")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MyMethodInterceptor")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("implements")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MethodInterceptor")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("intercept")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" o"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Method")]),s._v(" method"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" objects"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MethodProxy")]),s._v(" methodProxy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Throwable")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è°ƒç”¨æ–¹æ³•ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ è‡ªå·±çš„æ“ä½œ")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"before method "')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" method"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// é€šè¿‡åå°„è°ƒç”¨å§”æ‰˜ç±»çš„æ–¹æ³•")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" object "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" methodProxy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("invokeSuper")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("o"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" objects"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è°ƒç”¨æ–¹æ³•ä¹‹åï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥æ·»åŠ è‡ªå·±çš„æ“ä½œ")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"after method "')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" method"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" object"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])]),t("p",[s._v("â­ "),t("strong",[s._v("4 åˆ›å»ºä»£ç†å¯¹è±¡å¹¶æµ‹è¯•")])]),s._v(" "),t("p",[s._v("é€šè¿‡ "),t("code",[s._v("Enhancer.create()")]),s._v(" åˆ›å»ºå§”æ‰˜ç±»å¯¹è±¡çš„ä»£ç†å¯¹è±¡")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CGLibProxyTest")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" args"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// åˆ›å»ºåŠ¨æ€ä»£ç†å¢å¼ºç±»")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Enhancer")]),s._v(" enhancer "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Enhancer")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è®¾ç½®ç±»åŠ è½½å™¨ï¼Œè¿™é‡Œä½¿ç”¨äº†çš„å¯åŠ¨ç±»çš„ç±»åŠ è½½å™¨ï¼Œæ ¹ä¸åŒåœºæ™¯è‡ªè¡Œé€‰æ‹©")]),s._v("\n        enhancer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setClassLoader")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CGLibProxyTest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getClassLoader")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è®¾ç½®å§”æ‰˜ç±»ï¼ˆè®¾ç½®çˆ¶ç±»ï¼‰")]),s._v("\n        enhancer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setSuperclass")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SmsService")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è®¾ç½®æ–¹æ³•æ‹¦æˆªå™¨")]),s._v("\n        enhancer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setCallback")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MyMethodInterceptor")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// åˆ›å»ºä»£ç†ç±»")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SmsService")]),s._v(" smsServiceProxy "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SmsService")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" enhancer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("create")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æµ‹è¯•")]),s._v("\n        smsServiceProxy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("send")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Java"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("p",[s._v("æ§åˆ¶å°è¾“å‡ºï¼š")]),s._v(" "),t("div",{staticClass:"language-output line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("before method send\nsend message:Java\nafter method send\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h2",{attrs:{id:"jdk-ä¸-cglib-å¯¹æ¯”"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jdk-ä¸-cglib-å¯¹æ¯”"}},[s._v("#")]),s._v(" JDK ä¸ CGLib å¯¹æ¯”")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("ä»£ç†æ–¹å¼")]),s._v(" "),t("th",[s._v("å‡½æ•°")]),s._v(" "),t("th",[s._v("å®ç°æ–¹å¼")]),s._v(" "),t("th",[s._v("æ•ˆç‡")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("JDKåŠ¨æ€ä»£ç†")]),s._v(" "),t("td",[t("code",[s._v("Proxy.newProxyInstance")])]),s._v(" "),t("td",[s._v("é€šè¿‡æ¥å£åˆ›å»ºä»£ç†çš„å®ç°ç±»")]),s._v(" "),t("td",[s._v("é«˜")])]),s._v(" "),t("tr",[t("td",[s._v("CglibåŠ¨æ€ä»£ç†")]),s._v(" "),t("td",[t("code",[s._v("Enhancer")])]),s._v(" "),t("td",[s._v("é€šè¿‡ç»§æ‰¿çˆ¶ç±»åˆ›å»ºçš„ä»£ç†ç±»")]),s._v(" "),t("td",[s._v("ä½")])])])])])}),[],!1,null,null,null);t.default=e.exports}}]);